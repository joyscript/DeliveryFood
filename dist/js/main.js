(()=>{"use strict";var __webpack_modules__={604:()=>{eval("\n;// CONCATENATED MODULE: ./modules/auth.js\nconst auth = () => {\r\n  const buttonAuth = document.querySelector('.button-auth');\r\n  const buttonOut = document.querySelector('.button-out');\r\n  const buttonCart = document.querySelector('.button-cart');\r\n  const modalAuth = document.querySelector('.modal-auth');\r\n  const userName = document.querySelector('.user-name');\r\n  const logInForm = document.getElementById('logInForm');\r\n\r\n  const openModalAuth = () => modalAuth.classList.add('open');\r\n\r\n  const closeModalAuth = (e) => {\r\n    if (e.target === modalAuth || e.target.classList.contains('close-auth') || e.type === 'submit') {\r\n      modalAuth.classList.remove('open');\r\n    }\r\n  };\r\n\r\n  const userLogIn = (login) => {\r\n    buttonAuth.style.display = 'none';\r\n    buttonOut.style.display = 'flex';\r\n    buttonCart.style.display = 'flex';\r\n    userName.style.display = 'block';\r\n    userName.textContent = login;\r\n  };\r\n\r\n  const userLogOut = () => {\r\n    buttonAuth.style.display = 'flex';\r\n    buttonOut.style.display = '';\r\n    buttonCart.style.display = '';\r\n    userName.style.display = '';\r\n    userName.textContent = '';\r\n\r\n    localStorage.clear();\r\n    if (window.location.pathname === '/restaurant.html') window.location = 'index.html';\r\n  };\r\n\r\n  if (localStorage.getItem('user')) {\r\n    userLogIn(JSON.parse(localStorage.getItem('user')).login);\r\n  }\r\n\r\n  buttonAuth.addEventListener('click', openModalAuth);\r\n  modalAuth.addEventListener('click', closeModalAuth);\r\n  buttonOut.addEventListener('click', userLogOut);\r\n\r\n  logInForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n\r\n    const login = logInForm.querySelector('#login').value;\r\n    const password = logInForm.querySelector('#password').value;\r\n\r\n    localStorage.setItem('user', JSON.stringify({ login, password }));\r\n\r\n    closeModalAuth(e);\r\n    userLogIn(login);\r\n  });\r\n};\r\n\n;// CONCATENATED MODULE: ./modules/menu.js\nlet products = [];\r\n\r\nconst menu = () => {\r\n  const cardsContainer = document.querySelector('.cards-menu');\r\n  const restaurant = JSON.parse(localStorage.getItem('restaurant'));\r\n\r\n  const updateHeading = (restaurant) => {\r\n    const { name, stars, price, kitchen } = restaurant;\r\n\r\n    document.querySelector('.restaurant-title').textContent = name;\r\n    document.querySelector('.card-info .rating').textContent = stars;\r\n    document.querySelector('.card-info .price').textContent = `От ${price} ₽`;\r\n    document.querySelector('.card-info .category').textContent = kitchen;\r\n  };\r\n\r\n  const renderCard = (product) => {\r\n    const { id, name, description, price, image } = product;\r\n\r\n    const card = document.createElement('div');\r\n    card.classList.add('card');\r\n\r\n    card.innerHTML = `\r\n      <img src=${image} alt=\"image\" class=\"card-image\" />\r\n      <div class=\"card-text\">\r\n        <div class=\"card-heading\">\r\n          <h3 class=\"card-title card-title-reg\">${name}</h3>\r\n        </div>\r\n        <div class=\"card-info\">\r\n          <div class=\"ingredients\">${description}</div>\r\n        </div>\r\n        <div class=\"card-buttons\">\r\n          <button class=\"button button-primary button-add-cart\" data-id=${id}>\r\n            <span class=\"button-card-text\">В корзину</span>\r\n            <span class=\"button-cart-svg\"></span>\r\n          </button>\r\n          <strong class=\"card-price-bold\">${price} ₽</strong>\r\n        </div>\r\n      </div>\r\n      `;\r\n\r\n    cardsContainer.append(card);\r\n  };\r\n\r\n  if (!localStorage.getItem('user')) window.location = 'index.html';\r\n\r\n  if (restaurant) {\r\n    updateHeading(restaurant);\r\n\r\n    fetch(`https://deliveryfood-b2697-default-rtdb.firebaseio.com/db/${restaurant.products}`)\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        } else {\r\n          cardsContainer.innerHTML = `\r\n            <h3 class=\"card-title\">Извините, невозможно отобразить продукты.<br>\r\n            Ошибка ${res.status} - ${res.statusText}</h3>\r\n          `;\r\n          throw new Error(`error: ${res.status} ${res.statusText}`);\r\n        }\r\n      })\r\n      .then((data) => {\r\n        data.forEach((product) => {\r\n          renderCard(product);\r\n\r\n          const { id, name, price } = product;\r\n          products.push({ id, name, price, count: 1 });\r\n        });\r\n      })\r\n      .catch((err) => console.log(err.message));\r\n  } else {\r\n    window.location = 'index.html';\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./modules/cart.js\n\r\n\r\nconst cart = () => {\r\n  const cardsContainer = document.querySelector('.cards-menu');\r\n  const inputAddress = document.querySelector('.input-address');\r\n  const buttonCart = document.querySelector('.button-cart');\r\n  const modalCart = document.querySelector('.modal-cart');\r\n  const modalInfo = document.querySelector('.modal-info');\r\n  const infoForm = document.querySelector('#infoForm');\r\n\r\n  const modalBody = modalCart.querySelector('.modal-body');\r\n  const modalSum = modalCart.querySelector('.modal-pricetag');\r\n  const orderBtn = modalCart.querySelector('.button-order');\r\n  const clearCartBtn = modalCart.querySelector('.button-clear-cart');\r\n  const clearInfoBtn = modalInfo.querySelector('.button-clear-info');\r\n  const infoName = infoForm.querySelector('#info-login');\r\n  const infoPhone = infoForm.querySelector('#info-phone');\r\n  const infoAddress = infoForm.querySelector('#info-address');\r\n  const infoTime = infoForm.querySelector('#info-time');\r\n\r\n  const maxQuantity = 10;\r\n  let cartArr = [];\r\n  let customer = {};\r\n\r\n  const openModal = (modal) => modal.classList.add('open');\r\n\r\n  const closeModal = (e, modal) => {\r\n    if (e.target === modal || e.target.classList.contains('close')) {\r\n      modal.classList.remove('open');\r\n    }\r\n  };\r\n\r\n  const addToCart = (id) => {\r\n    const product = products.find((item) => item.id === id);\r\n    const productInCart = cartArr.find((item) => item.id === product.id);\r\n\r\n    productInCart ? productInCart.count++ : cartArr.push(product);\r\n  };\r\n\r\n  const saveCart = () => {\r\n    localStorage.setItem('cart', JSON.stringify(cartArr));\r\n  };\r\n\r\n  const saveInfo = () => {\r\n    localStorage.setItem('customer', JSON.stringify(customer));\r\n  };\r\n\r\n  const clearCart = () => {\r\n    cartArr = [];\r\n    modalBody.innerHTML = '';\r\n    modalSum.textContent = `0 ₽`;\r\n    orderBtn.classList.remove('open');\r\n    modalCart.classList.remove('open');\r\n    localStorage.removeItem('cart');\r\n  };\r\n\r\n  const calculateSum = () => {\r\n    let sum = cartArr.reduce((sum, item) => item.price * item.count + sum, 0);\r\n    modalSum.textContent = `${sum} ₽`;\r\n  };\r\n\r\n  const renderModalCart = () => {\r\n    modalBody.innerHTML = '';\r\n\r\n    cartArr.forEach(({ id, name, price, count }) => {\r\n      const foodRow = document.createElement('div');\r\n      foodRow.classList.add('food-row');\r\n\r\n      foodRow.innerHTML = `\r\n        <span class=\"food-name\">${name}</span>\r\n        <strong class=\"food-price\">${price} ₽</strong>\r\n        <div class=\"food-counter\">\r\n          <button class=\"counter-button btn-minus\" data-id=${id}>-</button>\r\n          <span class=\"counter\">${count}</span>\r\n          <button class=\"counter-button btn-plus\" data-id=${id}>+</button>\r\n        </div>\r\n      `;\r\n\r\n      modalBody.append(foodRow);\r\n    });\r\n\r\n    orderBtn.classList.add('open');\r\n    calculateSum();\r\n  };\r\n\r\n  const renderModalInfo = () => {\r\n    infoName.value = customer.name || '';\r\n    infoPhone.value = customer.phone || '';\r\n    infoAddress.value = customer.address || '';\r\n    infoTime.value = customer.time || '';\r\n  };\r\n\r\n  const getUserInfo = () => {\r\n    customer = {\r\n      name: infoName.value,\r\n      phone: infoPhone.value,\r\n      address: infoAddress.value,\r\n      time: infoTime.value,\r\n    };\r\n\r\n    saveInfo();\r\n  };\r\n\r\n  const showMessage = (message) => {\r\n    modalInfo.classList.remove('open');\r\n\r\n    const modalMessage = document.createElement('div');\r\n    modalMessage.classList.add('modal', 'modal-message', 'open');\r\n\r\n    modalMessage.innerHTML = `\r\n      <div class=\"modal-dialog\">\r\n        <h2 class=\"modal-title\">${message}</h2>\r\n      </div>\r\n    </div>`;\r\n\r\n    document.body.append(modalMessage);\r\n    document.body.classList.add('lock');\r\n\r\n    setTimeout(() => {\r\n      clearCart();\r\n      modalMessage.remove();\r\n      document.body.classList.remove('lock');\r\n    }, 2000);\r\n  };\r\n\r\n  // --------------------------------\r\n\r\n  if (localStorage.getItem('cart')) {\r\n    cartArr = JSON.parse(localStorage.getItem('cart'));\r\n    renderModalCart();\r\n  }\r\n\r\n  if (localStorage.getItem('customer')) {\r\n    customer = JSON.parse(localStorage.getItem('customer'));\r\n    renderModalInfo();\r\n  }\r\n\r\n  if (cardsContainer) {\r\n    cardsContainer.addEventListener('click', (e) => {\r\n      if (e.target.closest('.button-add-cart')) {\r\n        const btn = e.target.closest('.button-add-cart');\r\n\r\n        addToCart(btn.dataset.id);\r\n        saveCart();\r\n        renderModalCart();\r\n        openModal(modalCart);\r\n      }\r\n    });\r\n  }\r\n\r\n  inputAddress.addEventListener('change', () => {\r\n    customer.address = inputAddress.value;\r\n    saveInfo();\r\n    renderModalInfo();\r\n  });\r\n\r\n  buttonCart.addEventListener('click', () => {\r\n    openModal(modalCart);\r\n  });\r\n\r\n  modalCart.addEventListener('click', (e) => {\r\n    closeModal(e, modalCart);\r\n  });\r\n\r\n  modalInfo.addEventListener('click', (e) => {\r\n    closeModal(e, modalInfo);\r\n  });\r\n\r\n  modalBody.addEventListener('click', (e) => {\r\n    if (e.target.classList.contains('counter-button')) {\r\n      const btn = e.target;\r\n      const product = cartArr.find((item) => item.id === btn.dataset.id);\r\n\r\n      if (btn.classList.contains('btn-minus') && product.count > 0) {\r\n        btn.nextElementSibling.textContent--;\r\n        product.count--;\r\n      } else if (btn.classList.contains('btn-plus') && product.count < maxQuantity) {\r\n        btn.previousElementSibling.textContent++;\r\n        product.count++;\r\n      }\r\n\r\n      calculateSum();\r\n      saveCart();\r\n    }\r\n  });\r\n\r\n  orderBtn.addEventListener('click', (e) => {\r\n    modalCart.classList.remove('open');\r\n    openModal(modalInfo);\r\n  });\r\n\r\n  clearCartBtn.addEventListener('click', clearCart);\r\n\r\n  clearInfoBtn.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    infoForm.reset();\r\n  });\r\n\r\n  infoForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    getUserInfo();\r\n\r\n    fetch('https://jsonplaceholder.typicode.com/posts', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ customer: customer, order: cartArr }),\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) showMessage('Спасибо за заказ! <br>Мы скоро с вами свяжемся.');\r\n      })\r\n      .catch((err) => {\r\n        showMessage('Извините, невозможно оформить заказ');\r\n        console.log(err.message);\r\n      });\r\n  });\r\n};\r\n\n;// CONCATENATED MODULE: ./modules/swiper.js\nconst swiper = new Swiper('.swiper', {\r\n  loop: true,\r\n\r\n  autoplay: {\r\n    delay: 2500,\r\n    disableOnInteraction: false,\r\n  },\r\n\r\n  pagination: {\r\n    el: '.swiper-pagination',\r\n    clickable: true,\r\n  },\r\n\r\n  navigation: {\r\n    nextEl: '.swiper-button-next',\r\n    prevEl: '.swiper-button-prev',\r\n  },\r\n});\r\n\n;// CONCATENATED MODULE: ./modules/partners.js\nconst partners = () => {\r\n  const cardsContainer = document.querySelector('.cards-restaurants');\r\n\r\n  const renderCard = (restaurant) => {\r\n    const { name, time_of_delivery, stars, price, kitchen, image } = restaurant;\r\n\r\n    const card = document.createElement('a');\r\n    card.classList.add('card', 'card-restaurant');\r\n    card.href = 'restaurant.html';\r\n\r\n    card.innerHTML = `\r\n      <img src=${image} alt=\"image\" class=\"card-image\" />\r\n        <div class=\"card-text\">\r\n          <div class=\"card-heading\">\r\n            <h3 class=\"card-title\">${name}</h3>\r\n            <span class=\"card-tag tag\">${time_of_delivery} мин</span>\r\n          </div>\r\n          <div class=\"card-info\">\r\n            <div class=\"rating\">${stars}</div>\r\n            <div class=\"price\">От ${price} ₽</div>\r\n            <div class=\"category\">${kitchen}</div>\r\n          </div>\r\n        </div>\r\n      `;\r\n\r\n    cardsContainer.append(card);\r\n\r\n    card.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n\r\n      if (localStorage.getItem('user')) {\r\n        localStorage.setItem('restaurant', JSON.stringify(restaurant));\r\n        window.location = 'restaurant.html';\r\n      } else {\r\n        document.querySelector('.modal-auth').classList.add('open');\r\n      }\r\n    });\r\n  };\r\n\r\n  fetch('https://deliveryfood-b2697-default-rtdb.firebaseio.com/db/partners.json')\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } else {\r\n        cardsContainer.innerHTML = `\r\n          <h3 class=\"card-title\">Извините, невозможно отобразить данные.<br>\r\n          Ошибка ${res.status} - ${res.statusText}</h3>\r\n        `;\r\n        throw new Error(`error: ${res.status} ${res.statusText}`);\r\n      }\r\n    })\r\n    .then((data) => data.forEach((restaurant) => renderCard(restaurant)))\r\n    .catch((err) => console.log(err.message));\r\n};\r\n\n;// CONCATENATED MODULE: ./index.js\n\r\n\r\n\r\n\r\n\r\nauth();\r\ncart();\r\npartners();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxtQkFBbUIsWUFBWSxJQUFJLGVBQWU7QUFDbEQ7QUFDQSxrQ0FBa0MsWUFBWSxFQUFFLGVBQWU7QUFDL0Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOzs7QUNyRHNDO0FBQ0E7QUFDSTtBQUNJO0FBQzlDO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSixRQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9hdXRoLmpzPzRhNDIiLCJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9tZW51LmpzPzUyNGIiLCJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9jYXJ0LmpzPzJhZmEiLCJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9zd2lwZXIuanM/OWU1ZiIsIndlYnBhY2s6Ly8vLi9tb2R1bGVzL3BhcnRuZXJzLmpzPzYzMGYiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanM/NDFmNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgYXV0aCA9ICgpID0+IHtcclxuICBjb25zdCBidXR0b25BdXRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1hdXRoJyk7XHJcbiAgY29uc3QgYnV0dG9uT3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1vdXQnKTtcclxuICBjb25zdCBidXR0b25DYXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1jYXJ0Jyk7XHJcbiAgY29uc3QgbW9kYWxBdXRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWF1dGgnKTtcclxuICBjb25zdCB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyLW5hbWUnKTtcclxuICBjb25zdCBsb2dJbkZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nSW5Gb3JtJyk7XHJcblxyXG4gIGNvbnN0IG9wZW5Nb2RhbEF1dGggPSAoKSA9PiBtb2RhbEF1dGguY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xyXG5cclxuICBjb25zdCBjbG9zZU1vZGFsQXV0aCA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsQXV0aCB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nsb3NlLWF1dGgnKSB8fCBlLnR5cGUgPT09ICdzdWJtaXQnKSB7XHJcbiAgICAgIG1vZGFsQXV0aC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdXNlckxvZ0luID0gKGxvZ2luKSA9PiB7XHJcbiAgICBidXR0b25BdXRoLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICBidXR0b25PdXQuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgIGJ1dHRvbkNhcnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgIHVzZXJOYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSBsb2dpbjtcclxuICB9O1xyXG5cclxuICBjb25zdCB1c2VyTG9nT3V0ID0gKCkgPT4ge1xyXG4gICAgYnV0dG9uQXV0aC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgYnV0dG9uT3V0LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgIGJ1dHRvbkNhcnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgdXNlck5hbWUuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICcvcmVzdGF1cmFudC5odG1sJykgd2luZG93LmxvY2F0aW9uID0gJ2luZGV4Lmh0bWwnO1xyXG4gIH07XHJcblxyXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKSB7XHJcbiAgICB1c2VyTG9nSW4oSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKS5sb2dpbik7XHJcbiAgfVxyXG5cclxuICBidXR0b25BdXRoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk1vZGFsQXV0aCk7XHJcbiAgbW9kYWxBdXRoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbEF1dGgpO1xyXG4gIGJ1dHRvbk91dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVzZXJMb2dPdXQpO1xyXG5cclxuICBsb2dJbkZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBjb25zdCBsb2dpbiA9IGxvZ0luRm9ybS5xdWVyeVNlbGVjdG9yKCcjbG9naW4nKS52YWx1ZTtcclxuICAgIGNvbnN0IHBhc3N3b3JkID0gbG9nSW5Gb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwYXNzd29yZCcpLnZhbHVlO1xyXG5cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkoeyBsb2dpbiwgcGFzc3dvcmQgfSkpO1xyXG5cclxuICAgIGNsb3NlTW9kYWxBdXRoKGUpO1xyXG4gICAgdXNlckxvZ0luKGxvZ2luKTtcclxuICB9KTtcclxufTtcclxuIiwiZXhwb3J0IGxldCBwcm9kdWN0cyA9IFtdO1xyXG5cclxuZXhwb3J0IGNvbnN0IG1lbnUgPSAoKSA9PiB7XHJcbiAgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHMtbWVudScpO1xyXG4gIGNvbnN0IHJlc3RhdXJhbnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZXN0YXVyYW50JykpO1xyXG5cclxuICBjb25zdCB1cGRhdGVIZWFkaW5nID0gKHJlc3RhdXJhbnQpID0+IHtcclxuICAgIGNvbnN0IHsgbmFtZSwgc3RhcnMsIHByaWNlLCBraXRjaGVuIH0gPSByZXN0YXVyYW50O1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXN0YXVyYW50LXRpdGxlJykudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtaW5mbyAucmF0aW5nJykudGV4dENvbnRlbnQgPSBzdGFycztcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWluZm8gLnByaWNlJykudGV4dENvbnRlbnQgPSBg0J7RgiAke3ByaWNlfSDigr1gO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtaW5mbyAuY2F0ZWdvcnknKS50ZXh0Q29udGVudCA9IGtpdGNoZW47XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVuZGVyQ2FyZCA9IChwcm9kdWN0KSA9PiB7XHJcbiAgICBjb25zdCB7IGlkLCBuYW1lLCBkZXNjcmlwdGlvbiwgcHJpY2UsIGltYWdlIH0gPSBwcm9kdWN0O1xyXG5cclxuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnY2FyZCcpO1xyXG5cclxuICAgIGNhcmQuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8aW1nIHNyYz0ke2ltYWdlfSBhbHQ9XCJpbWFnZVwiIGNsYXNzPVwiY2FyZC1pbWFnZVwiIC8+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLXRleHRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkaW5nXCI+XHJcbiAgICAgICAgICA8aDMgY2xhc3M9XCJjYXJkLXRpdGxlIGNhcmQtdGl0bGUtcmVnXCI+JHtuYW1lfTwvaDM+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaW5mb1wiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImluZ3JlZGllbnRzXCI+JHtkZXNjcmlwdGlvbn08L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1idXR0b25zXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi1wcmltYXJ5IGJ1dHRvbi1hZGQtY2FydFwiIGRhdGEtaWQ9JHtpZH0+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYnV0dG9uLWNhcmQtdGV4dFwiPtCSINC60L7RgNC30LjQvdGDPC9zcGFuPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJ1dHRvbi1jYXJ0LXN2Z1wiPjwvc3Bhbj5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPHN0cm9uZyBjbGFzcz1cImNhcmQtcHJpY2UtYm9sZFwiPiR7cHJpY2V9IOKCvTwvc3Ryb25nPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgYDtcclxuXHJcbiAgICBjYXJkc0NvbnRhaW5lci5hcHBlbmQoY2FyZCk7XHJcbiAgfTtcclxuXHJcbiAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKSB3aW5kb3cubG9jYXRpb24gPSAnaW5kZXguaHRtbCc7XHJcblxyXG4gIGlmIChyZXN0YXVyYW50KSB7XHJcbiAgICB1cGRhdGVIZWFkaW5nKHJlc3RhdXJhbnQpO1xyXG5cclxuICAgIGZldGNoKGBodHRwczovL2RlbGl2ZXJ5Zm9vZC1iMjY5Ny1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb20vZGIvJHtyZXN0YXVyYW50LnByb2R1Y3RzfWApXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY2FyZHNDb250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXJkLXRpdGxlXCI+0JjQt9Cy0LjQvdC40YLQtSwg0L3QtdCy0L7Qt9C80L7QttC90L4g0L7RgtC+0LHRgNCw0LfQuNGC0Ywg0L/RgNC+0LTRg9C60YLRiy48YnI+XHJcbiAgICAgICAgICAgINCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9IC0gJHtyZXMuc3RhdHVzVGV4dH08L2gzPlxyXG4gICAgICAgICAgYDtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXJyb3I6ICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgZGF0YS5mb3JFYWNoKChwcm9kdWN0KSA9PiB7XHJcbiAgICAgICAgICByZW5kZXJDYXJkKHByb2R1Y3QpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHsgaWQsIG5hbWUsIHByaWNlIH0gPSBwcm9kdWN0O1xyXG4gICAgICAgICAgcHJvZHVjdHMucHVzaCh7IGlkLCBuYW1lLCBwcmljZSwgY291bnQ6IDEgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB3aW5kb3cubG9jYXRpb24gPSAnaW5kZXguaHRtbCc7XHJcbiAgfVxyXG59O1xyXG4iLCJpbXBvcnQgeyBwcm9kdWN0cyB9IGZyb20gJy4vbWVudSc7XHJcblxyXG5leHBvcnQgY29uc3QgY2FydCA9ICgpID0+IHtcclxuICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkcy1tZW51Jyk7XHJcbiAgY29uc3QgaW5wdXRBZGRyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlucHV0LWFkZHJlc3MnKTtcclxuICBjb25zdCBidXR0b25DYXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1jYXJ0Jyk7XHJcbiAgY29uc3QgbW9kYWxDYXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNhcnQnKTtcclxuICBjb25zdCBtb2RhbEluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtaW5mbycpO1xyXG4gIGNvbnN0IGluZm9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luZm9Gb3JtJyk7XHJcblxyXG4gIGNvbnN0IG1vZGFsQm9keSA9IG1vZGFsQ2FydC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtYm9keScpO1xyXG4gIGNvbnN0IG1vZGFsU3VtID0gbW9kYWxDYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1wcmljZXRhZycpO1xyXG4gIGNvbnN0IG9yZGVyQnRuID0gbW9kYWxDYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tb3JkZXInKTtcclxuICBjb25zdCBjbGVhckNhcnRCdG4gPSBtb2RhbENhcnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1jbGVhci1jYXJ0Jyk7XHJcbiAgY29uc3QgY2xlYXJJbmZvQnRuID0gbW9kYWxJbmZvLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tY2xlYXItaW5mbycpO1xyXG4gIGNvbnN0IGluZm9OYW1lID0gaW5mb0Zvcm0ucXVlcnlTZWxlY3RvcignI2luZm8tbG9naW4nKTtcclxuICBjb25zdCBpbmZvUGhvbmUgPSBpbmZvRm9ybS5xdWVyeVNlbGVjdG9yKCcjaW5mby1waG9uZScpO1xyXG4gIGNvbnN0IGluZm9BZGRyZXNzID0gaW5mb0Zvcm0ucXVlcnlTZWxlY3RvcignI2luZm8tYWRkcmVzcycpO1xyXG4gIGNvbnN0IGluZm9UaW1lID0gaW5mb0Zvcm0ucXVlcnlTZWxlY3RvcignI2luZm8tdGltZScpO1xyXG5cclxuICBjb25zdCBtYXhRdWFudGl0eSA9IDEwO1xyXG4gIGxldCBjYXJ0QXJyID0gW107XHJcbiAgbGV0IGN1c3RvbWVyID0ge307XHJcblxyXG4gIGNvbnN0IG9wZW5Nb2RhbCA9IChtb2RhbCkgPT4gbW9kYWwuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xyXG5cclxuICBjb25zdCBjbG9zZU1vZGFsID0gKGUsIG1vZGFsKSA9PiB7XHJcbiAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2xvc2UnKSkge1xyXG4gICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgYWRkVG9DYXJ0ID0gKGlkKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0ID0gcHJvZHVjdHMuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpO1xyXG4gICAgY29uc3QgcHJvZHVjdEluQ2FydCA9IGNhcnRBcnIuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gcHJvZHVjdC5pZCk7XHJcblxyXG4gICAgcHJvZHVjdEluQ2FydCA/IHByb2R1Y3RJbkNhcnQuY291bnQrKyA6IGNhcnRBcnIucHVzaChwcm9kdWN0KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBzYXZlQ2FydCA9ICgpID0+IHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoY2FydEFycikpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNhdmVJbmZvID0gKCkgPT4ge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1c3RvbWVyJywgSlNPTi5zdHJpbmdpZnkoY3VzdG9tZXIpKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjbGVhckNhcnQgPSAoKSA9PiB7XHJcbiAgICBjYXJ0QXJyID0gW107XHJcbiAgICBtb2RhbEJvZHkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBtb2RhbFN1bS50ZXh0Q29udGVudCA9IGAwIOKCvWA7XHJcbiAgICBvcmRlckJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XHJcbiAgICBtb2RhbENhcnQuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NhcnQnKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjYWxjdWxhdGVTdW0gPSAoKSA9PiB7XHJcbiAgICBsZXQgc3VtID0gY2FydEFyci5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gaXRlbS5wcmljZSAqIGl0ZW0uY291bnQgKyBzdW0sIDApO1xyXG4gICAgbW9kYWxTdW0udGV4dENvbnRlbnQgPSBgJHtzdW19IOKCvWA7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVuZGVyTW9kYWxDYXJ0ID0gKCkgPT4ge1xyXG4gICAgbW9kYWxCb2R5LmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgIGNhcnRBcnIuZm9yRWFjaCgoeyBpZCwgbmFtZSwgcHJpY2UsIGNvdW50IH0pID0+IHtcclxuICAgICAgY29uc3QgZm9vZFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBmb29kUm93LmNsYXNzTGlzdC5hZGQoJ2Zvb2Qtcm93Jyk7XHJcblxyXG4gICAgICBmb29kUm93LmlubmVySFRNTCA9IGBcclxuICAgICAgICA8c3BhbiBjbGFzcz1cImZvb2QtbmFtZVwiPiR7bmFtZX08L3NwYW4+XHJcbiAgICAgICAgPHN0cm9uZyBjbGFzcz1cImZvb2QtcHJpY2VcIj4ke3ByaWNlfSDigr08L3N0cm9uZz5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vZC1jb3VudGVyXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY291bnRlci1idXR0b24gYnRuLW1pbnVzXCIgZGF0YS1pZD0ke2lkfT4tPC9idXR0b24+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvdW50ZXJcIj4ke2NvdW50fTwvc3Bhbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjb3VudGVyLWJ1dHRvbiBidG4tcGx1c1wiIGRhdGEtaWQ9JHtpZH0+KzwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgO1xyXG5cclxuICAgICAgbW9kYWxCb2R5LmFwcGVuZChmb29kUm93KTtcclxuICAgIH0pO1xyXG5cclxuICAgIG9yZGVyQnRuLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcclxuICAgIGNhbGN1bGF0ZVN1bSgpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlbmRlck1vZGFsSW5mbyA9ICgpID0+IHtcclxuICAgIGluZm9OYW1lLnZhbHVlID0gY3VzdG9tZXIubmFtZSB8fCAnJztcclxuICAgIGluZm9QaG9uZS52YWx1ZSA9IGN1c3RvbWVyLnBob25lIHx8ICcnO1xyXG4gICAgaW5mb0FkZHJlc3MudmFsdWUgPSBjdXN0b21lci5hZGRyZXNzIHx8ICcnO1xyXG4gICAgaW5mb1RpbWUudmFsdWUgPSBjdXN0b21lci50aW1lIHx8ICcnO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldFVzZXJJbmZvID0gKCkgPT4ge1xyXG4gICAgY3VzdG9tZXIgPSB7XHJcbiAgICAgIG5hbWU6IGluZm9OYW1lLnZhbHVlLFxyXG4gICAgICBwaG9uZTogaW5mb1Bob25lLnZhbHVlLFxyXG4gICAgICBhZGRyZXNzOiBpbmZvQWRkcmVzcy52YWx1ZSxcclxuICAgICAgdGltZTogaW5mb1RpbWUudmFsdWUsXHJcbiAgICB9O1xyXG5cclxuICAgIHNhdmVJbmZvKCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2hvd01lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xyXG4gICAgbW9kYWxJbmZvLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuXHJcbiAgICBjb25zdCBtb2RhbE1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG1vZGFsTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdtb2RhbCcsICdtb2RhbC1tZXNzYWdlJywgJ29wZW4nKTtcclxuXHJcbiAgICBtb2RhbE1lc3NhZ2UuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XHJcbiAgICAgICAgPGgyIGNsYXNzPVwibW9kYWwtdGl0bGVcIj4ke21lc3NhZ2V9PC9oMj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gO1xyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKG1vZGFsTWVzc2FnZSk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xvY2snKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgY2xlYXJDYXJ0KCk7XHJcbiAgICAgIG1vZGFsTWVzc2FnZS5yZW1vdmUoKTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdsb2NrJyk7XHJcbiAgICB9LCAyMDAwKTtcclxuICB9O1xyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkge1xyXG4gICAgY2FydEFyciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSk7XHJcbiAgICByZW5kZXJNb2RhbENhcnQoKTtcclxuICB9XHJcblxyXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VzdG9tZXInKSkge1xyXG4gICAgY3VzdG9tZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXN0b21lcicpKTtcclxuICAgIHJlbmRlck1vZGFsSW5mbygpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGNhcmRzQ29udGFpbmVyKSB7XHJcbiAgICBjYXJkc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuYnV0dG9uLWFkZC1jYXJ0JykpIHtcclxuICAgICAgICBjb25zdCBidG4gPSBlLnRhcmdldC5jbG9zZXN0KCcuYnV0dG9uLWFkZC1jYXJ0Jyk7XHJcblxyXG4gICAgICAgIGFkZFRvQ2FydChidG4uZGF0YXNldC5pZCk7XHJcbiAgICAgICAgc2F2ZUNhcnQoKTtcclxuICAgICAgICByZW5kZXJNb2RhbENhcnQoKTtcclxuICAgICAgICBvcGVuTW9kYWwobW9kYWxDYXJ0KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpbnB1dEFkZHJlc3MuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgY3VzdG9tZXIuYWRkcmVzcyA9IGlucHV0QWRkcmVzcy52YWx1ZTtcclxuICAgIHNhdmVJbmZvKCk7XHJcbiAgICByZW5kZXJNb2RhbEluZm8oKTtcclxuICB9KTtcclxuXHJcbiAgYnV0dG9uQ2FydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIG9wZW5Nb2RhbChtb2RhbENhcnQpO1xyXG4gIH0pO1xyXG5cclxuICBtb2RhbENhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgY2xvc2VNb2RhbChlLCBtb2RhbENhcnQpO1xyXG4gIH0pO1xyXG5cclxuICBtb2RhbEluZm8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgY2xvc2VNb2RhbChlLCBtb2RhbEluZm8pO1xyXG4gIH0pO1xyXG5cclxuICBtb2RhbEJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY291bnRlci1idXR0b24nKSkge1xyXG4gICAgICBjb25zdCBidG4gPSBlLnRhcmdldDtcclxuICAgICAgY29uc3QgcHJvZHVjdCA9IGNhcnRBcnIuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gYnRuLmRhdGFzZXQuaWQpO1xyXG5cclxuICAgICAgaWYgKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2J0bi1taW51cycpICYmIHByb2R1Y3QuY291bnQgPiAwKSB7XHJcbiAgICAgICAgYnRuLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudC0tO1xyXG4gICAgICAgIHByb2R1Y3QuY291bnQtLTtcclxuICAgICAgfSBlbHNlIGlmIChidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tcGx1cycpICYmIHByb2R1Y3QuY291bnQgPCBtYXhRdWFudGl0eSkge1xyXG4gICAgICAgIGJ0bi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50Kys7XHJcbiAgICAgICAgcHJvZHVjdC5jb3VudCsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYWxjdWxhdGVTdW0oKTtcclxuICAgICAgc2F2ZUNhcnQoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgb3JkZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgbW9kYWxDYXJ0LmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuICAgIG9wZW5Nb2RhbChtb2RhbEluZm8pO1xyXG4gIH0pO1xyXG5cclxuICBjbGVhckNhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGVhckNhcnQpO1xyXG5cclxuICBjbGVhckluZm9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaW5mb0Zvcm0ucmVzZXQoKTtcclxuICB9KTtcclxuXHJcbiAgaW5mb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGdldFVzZXJJbmZvKCk7XHJcblxyXG4gICAgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY3VzdG9tZXI6IGN1c3RvbWVyLCBvcmRlcjogY2FydEFyciB9KSxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCcsXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykgc2hvd01lc3NhZ2UoJ9Ch0L/QsNGB0LjQsdC+INC30LAg0LfQsNC60LDQtyEgPGJyPtCc0Ysg0YHQutC+0YDQviDRgSDQstCw0LzQuCDRgdCy0Y/QttC10LzRgdGPLicpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIHNob3dNZXNzYWdlKCfQmNC30LLQuNC90LjRgtC1LCDQvdC10LLQvtC30LzQvtC20L3QviDQvtGE0L7RgNC80LjRgtGMINC30LDQutCw0LcnKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG4iLCJleHBvcnQgY29uc3Qgc3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlcicsIHtcclxuICBsb29wOiB0cnVlLFxyXG5cclxuICBhdXRvcGxheToge1xyXG4gICAgZGVsYXk6IDI1MDAsXHJcbiAgICBkaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UsXHJcbiAgfSxcclxuXHJcbiAgcGFnaW5hdGlvbjoge1xyXG4gICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxyXG4gICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gIH0sXHJcblxyXG4gIG5hdmlnYXRpb246IHtcclxuICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxyXG4gICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXHJcbiAgfSxcclxufSk7XHJcbiIsImV4cG9ydCBjb25zdCBwYXJ0bmVycyA9ICgpID0+IHtcclxuICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkcy1yZXN0YXVyYW50cycpO1xyXG5cclxuICBjb25zdCByZW5kZXJDYXJkID0gKHJlc3RhdXJhbnQpID0+IHtcclxuICAgIGNvbnN0IHsgbmFtZSwgdGltZV9vZl9kZWxpdmVyeSwgc3RhcnMsIHByaWNlLCBraXRjaGVuLCBpbWFnZSB9ID0gcmVzdGF1cmFudDtcclxuXHJcbiAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdjYXJkJywgJ2NhcmQtcmVzdGF1cmFudCcpO1xyXG4gICAgY2FyZC5ocmVmID0gJ3Jlc3RhdXJhbnQuaHRtbCc7XHJcblxyXG4gICAgY2FyZC5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxpbWcgc3JjPSR7aW1hZ2V9IGFsdD1cImltYWdlXCIgY2xhc3M9XCJjYXJkLWltYWdlXCIgLz5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC10ZXh0XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkaW5nXCI+XHJcbiAgICAgICAgICAgIDxoMyBjbGFzcz1cImNhcmQtdGl0bGVcIj4ke25hbWV9PC9oMz5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJkLXRhZyB0YWdcIj4ke3RpbWVfb2ZfZGVsaXZlcnl9INC80LjQvTwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaW5mb1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmF0aW5nXCI+JHtzdGFyc308L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByaWNlXCI+0J7RgiAke3ByaWNlfSDigr08L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5XCI+JHtraXRjaGVufTwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGA7XHJcblxyXG4gICAgY2FyZHNDb250YWluZXIuYXBwZW5kKGNhcmQpO1xyXG5cclxuICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZXN0YXVyYW50JywgSlNPTi5zdHJpbmdpZnkocmVzdGF1cmFudCkpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICdyZXN0YXVyYW50Lmh0bWwnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1hdXRoJykuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBmZXRjaCgnaHR0cHM6Ly9kZWxpdmVyeWZvb2QtYjI2OTctZGVmYXVsdC1ydGRiLmZpcmViYXNlaW8uY29tL2RiL3BhcnRuZXJzLmpzb24nKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2FyZHNDb250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgPGgzIGNsYXNzPVwiY2FyZC10aXRsZVwiPtCY0LfQstC40L3QuNGC0LUsINC90LXQstC+0LfQvNC+0LbQvdC+INC+0YLQvtCx0YDQsNC30LjRgtGMINC00LDQvdC90YvQtS48YnI+XHJcbiAgICAgICAgICDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfSAtICR7cmVzLnN0YXR1c1RleHR9PC9oMz5cclxuICAgICAgICBgO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXJyb3I6ICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC50aGVuKChkYXRhKSA9PiBkYXRhLmZvckVhY2goKHJlc3RhdXJhbnQpID0+IHJlbmRlckNhcmQocmVzdGF1cmFudCkpKVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKSk7XHJcbn07XHJcbiIsImltcG9ydCB7IGF1dGggfSBmcm9tICcuL21vZHVsZXMvYXV0aCc7XHJcbmltcG9ydCB7IGNhcnQgfSBmcm9tICcuL21vZHVsZXMvY2FydCc7XHJcbmltcG9ydCB7IHN3aXBlciB9IGZyb20gJy4vbW9kdWxlcy9zd2lwZXInO1xyXG5pbXBvcnQgeyBwYXJ0bmVycyB9IGZyb20gJy4vbW9kdWxlcy9wYXJ0bmVycyc7XHJcblxyXG5hdXRoKCk7XHJcbmNhcnQoKTtcclxucGFydG5lcnMoKTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///604\n")}},__webpack_exports__={};__webpack_modules__[604]()})();